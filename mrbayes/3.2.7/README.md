# This image belongs to a larger project called Bioinformatics Docker Images Project (http://pegi3s.github.io/dockerfiles)
## (Please note that the original software licenses still apply)

This image facilitates the usage of [MrBayes](http://mrbayes.sourceforge.net/index.php), a program for Bayesian inference and model choice across a wide range of phylogenetic and evolutionary models. `MrBayes` uses Markov chain Monte Carlo (`MCMC`) methods to estimate the posterior distribution of model parameters.

# Using MrBayes image in Linux

You should adapt and run the following command: `docker run --rm -v /your/data/dir:/data pegi3s/mrbayes mb /data/input`

In this command, you should replace:
- `/your/data/dir` to point to the directory that contains the NEXUS file you want to analyze.
- `input` to the actual name of your input NEXUS file.
- `data` to the actual name of the directory where output files will be created.

To see `MrBayes` help menu, first you need to run: `docker run --rm -it -v /your/data/dir:/data pegi3s/mrbayes mb`, which opens `MrBayes` own command-line interface. Then execute: `help`.

# Test data
To test the previous command, you can copy and paste the following sample data into the input NEXUS file:
```
#NEXUS
BEGIN DATA;
dimensions ntax=6 nchar=1170;
format missing=?
interleave=yes datatype=DNA gap=- match=.;

matrix
AY766153.1  ATGCCGAATGGTATTTTAAAGAAATTGCCTGAAGATTTGGTGTTTCTTAT
AY500390.1  ATGGCGAATGATATTTTGATGAAATTGCCCGAAGATTTGGTGTTTCTTGT
AY500392.2  ATGGCGAATGGTGTTTTAAAGAAATTGCCCGAAGATTTGGTGTGTCTCAT
AY766155.1  ATGGCGAATGGTATTTTAAAGAAATTGCCCGAAGATTTGGTGTTTCTTAT
AY500391.1  ATGGCGAATGGTATTTTAAAGAAATTGCCCGAAGATTTGGTGTTTCTTAT
AY766154.1  ATGGCGAATGGTATTTTAAAGAAATTGCCCGAAGATTTGGTGTTCCTTAT

AY766153.1  ACTATTAACATTTTCAGTGAAATCTCTCATGCGATTCAAATGTATCTCTA
AY500390.1  ACTGTTAACATTTCCCGTTAAATCTCTCCTGCGATTCAAATGTATTTCTA
AY500392.2  ACTATTAACATTTCCTGTGAAATCACTTATGCGATTCAAATGTATCTCTA
AY766155.1  ACTACTAACATTTCCAGTGAAATCTCTTATGCGATTCAAATGTATCTCAA
AY500391.1  ACTATTAACATTTCCAGTGAAATCTCTTATGCGATTCAAATGTATCTCTA
AY766154.1  ACTATTAACATTTCCAGTGAAATCTCTTCTGCGATTCAAATGTATCTCTA

AY766153.1  AAGCTTTCTCCATTCTCATACAATCCACCACTTTCATAAATCGTCATGTC
AY500390.1  AAGCTTGGTCCATTCTCATACAATCCACCACTTTCATAAACCGTCATGTC
AY500392.2  AAACTTGGTCCATTCTCATACAATCCACCACTTTCATAAACCGTCATGTC
AY766155.1  AATCTTGGTCCTTTCTCATACAATCCACCGGTTTCATAAACCGTCATGTC
AY500391.1  AAGCTTGGTCCATTCTCATACAATCAACTACTTTCATAAACCGTCATATC
AY766154.1  AAGCTTGGTCCATTCTCATACAATCCACCACTTTCATAAACCGGCATATC

AY766153.1  AATCACGAAATAAACAAAGAAGATGAATTCATTCTCTTCAAGCGCGCCAT
AY500390.1  AATCGCAAAACAAACACAAAAGATGAATTCATTATCTTCAAGCGTTCCAT
AY500392.2  AATCGCAAAACAAACACAAAAGATGAATTTATTCTCTTCAAACGTGCCAT
AY766155.1  AATCGCAAAACCAACACAAAAGATGAATTCATTCTCTTCAAGCGTGCCAT
AY500391.1  AATCGCAAAACAAACACAAAAGATGAATTCATTCTCTTCAAGCGTGCCAT
AY766154.1  AATCGCAAAACAAACACAAAAGCTGAATTCATTCTCTTTAAGCGTTCCAT

AY766153.1  CAAAGATGAAGAAGAAGAATTTATAAATATCTTGTCCTTTTTTTCTGGTC
AY500390.1  CAAAGATGAACAAGAAGGATTTAAAGATATCTTGTCTTTTTTTTCTGGTC
AY500392.2  CAAAGATGAACAAGAAGAATTTAGAGATATCTTGTCTTTTTTATCTGGTC
AY766155.1  CAAAGATGAAGAAGAAGAATTTATAAATATCTTGTCTTTTTTTTCTGGTT
AY500391.1  CAAAGATGATGAAGAAGAATTTATAAATATCTTGTCTTTTTTTTCTGGTC
AY766154.1  CAAAGATGAAGAAGAAGAATTTATAAATATCTTGTCTTTTTTTTCTGGTA

AY766153.1  ATGATGATGTTCTTAACCCTCTTTTTCCAGATATAGATGTGTCATACATG
AY500390.1  ATGATGATGTTCTTAACCCTCTTTTTCCAGATGTAGAAGTGTCGTACATG
AY500392.2  ATGATGATGTTCTTAACCCTCTTTTTGCAGATATAGATGTGTCATATATG
AY766155.1  ATGATGATGTTCTTAACCCTCTTTTTCCAGATATAGATGTGTCATACATG
AY500391.1  ATGTTGATGTTCTTAACCCTCTTTTTCCAGATATGGATGTGTCATACATG
AY766154.1  ATGATGATGTTCTTAACCCTCTTTTTCCAGATATAGATGTGTCATACATG

AY766153.1  ACCTCCAAATTCAATTGCACTTTTAATCCACTCATCGGTCCTTGTGATGG
AY500390.1  ACATCCAAATGCAATTGCACTTTTAATCCACTCATCGGTCCTTGTGATGG
AY500392.2  ACCTCTAAGTGCAATTGCGCTTTTAATCCACTCATCGGTCCTTGTGATGG
AY766155.1  ACCTCCAATTGCAATTGCACTTTTAATCCACTCATCGGTCCTTGTGATGG
AY500391.1  ACCTCCAAATGCGATTGCACTTTTAATCCACTCATCGGTCCTTGTGATGG
AY766154.1  ACGTCCAAATGCGATTGCACTTTTACTCCACTCATCGGTCCTTGTGATGG

AY766153.1  TTTGATTGCTTTGACAGATTCCATAATCACCATAATACTTAATCCGGCTA
AY500390.1  TTTGATTGCTTTGACAGATTCCATAATCACCATCTTACTTAATCCGGCCA
AY500392.2  TTTGATTGCTTTGACAGATACCATAATCACCATAATACTCAATCCGGCTA
AY766155.1  TTTGATTGCTCTGACAGATACCATAATCACCATCTTACTTAATCCGGCAA
AY500391.1  TTTGATTGCTTTGACAGATACCATAATCACCATAGTACTTAATCCGGCTA
AY766154.1  TTTGATTGCTTTGACAGATACCATAATCACCATAGTACTTAATCCGGCTA

AY766153.1  CCAGAAACTTCAGAGTGCTCCCACCTAGCCCTTTTGGTTGTCCTAAAGGC
AY500390.1  CAAGAAACTTCAGATTGCTCCCACCTAGCCCTTTTGGTTGTCCAAAAGGT
AY500392.2  CCAGAAACTTCAGATTGCTCCCACCTAGCCCTTTTGGTAGTCCAAAAGGT
AY766155.1  CAAGAAACTTCAGATTGCTCCCACCTAGCCCTTTTGCTTGTCCTAAAGGT
AY500391.1  CCAGAAACTTCAGAGTGCTCCCAGCTAGCCCTTTTGGTTGTCCAAAAGGT
AY766154.1  CCAGAAACTTCAGAGTGCTCCCACCTAGCCCTTTTGGTTGTCCAAAAGGT

AY766153.1  TACCATCGTTCCGTTGAAGGGGTCGGGTTTGGCTTGGACACCATTTCAAA
AY500390.1  TACCATCGTTCTGTTGAAGGGGTTGGGCTTGGCTTGGACACCATTTCAAA
AY500392.2  TACCATCGTTCTGTTGAAGGAGTCGGGTTTGGCTTGGACACCATTTCAAA
AY766155.1  TACCATCGTTCGATTGAAGGGGTCGGGTTTGGCTTGGACACCATTTCAAA
AY500391.1  TACCATCGTTCTGTTGAAGGGGTTGGGTTTGGCTTGGATACCATTTCAAA
AY766154.1  TACCATCGTTCCGTTGAAGGGGTCGGATTTGGCTTTGACACCATTTCATA

AY766153.1  TTACTATAAGGTTGTTAGGATTTCTGAAGTTTATTGTGAAGAAGCTGGTG
AY500390.1  TTACTATAAGGTTGTTAGGATTTCTGAAGTTTATTGTGAAGAAGCTGGTG
AY500392.2  TTACTATAAGGTTGTTAGGATTTCTGAAGTTTATTGTGAAGAAGATGGTG
AY766155.1  TTATTATAAGGTTGTTAGGATTTCTGAAGTTTATTGTGAAGAAGCTGATG
AY500391.1  TTACTATAAGGTTGTTAGGATTTCTGAAGTTTATTGTGAAGAAGCTGATG
AY766154.1  TTACTATAAGGTTGTTAGGATTTCTGAAGTTTATTGTGAAGAAGCTGATG

AY766153.1  GTTATCCTGGTCCTAAAGATAGTAAAATTGATGTTTTTGATTTGCGCACT
AY500390.1  GTTATCCTGGTCCTAAAGATAGTAAAATTGATGTTTGTGATTTGGGCACT
AY500392.2  GTTATCCTGGTCCTAAAGATAGTAAAATTGATGCTTTTGATTTGAGCACT
AY766155.1  GTTATCCTGGTCCTAAAGATAGTAAAATTGATGTTTGTGATTTGGTTACT
AY500391.1  GTTATCCTGGTCCTAAAGATAGTAAAATTGATGTTTGTGATTTGAGTACT
AY766154.1  GTTATCCTGGTCCTAAAGATAGTAAAATTGATGTTTGTGATTTGAGTACT

AY766153.1  GATACTTGGAAAGAATTGGACCATGTACAGTTGCCATTGATTTATTGGTT
AY500390.1  GATTCTTGGAGAGAATTGGATCATGTACAGTTGCCATTGATTTATTGGGT
AY500392.2  GATTCTTGGAGAGAATTGGACCATGTGCAGTTGCCATTGATTTATTGGTT
AY766155.1  GATTCTTGGAGAGAATTGGACCATATACAGTTGCCATTGATTTACTGGGT
AY500391.1  GATTCTTGGAGAGAATTGGACCATGTACAGTTGCCATCGATTTATTGGGT
AY766154.1  GATTCTTGGAGAGAATTGGACCATGTACAGTTGCCATCGATTTATTGGGT

AY766153.1  GCCTTGTTCTGGGATGCTTTACAAGCAAATGGTTCACTGGTTTGCAACTA
AY500390.1  GCCTTGTTCTGGGATGCTTTACAAGGAAATGGTTCACTGGTTTGCAACGA
AY500392.2  GCCTTGTTCTGGGATGCTTTACAAGGAAATGGTTCACTGGTTTGCAACTA
AY766155.1  GCCTTGTTCTGGGATGCTTTACATGGAAATGGTTCACTGGTTTGCAACTA
AY500391.1  GCCTTGTGCTGGAATGCTTTACAAGGAAATGGTTCACTGGTTTGCAACTA
AY766154.1  GCCTTGTGCAGGAATGCTTTACAAGGAAATGGTTCACTGGTTTGCAACTA

AY766153.1  CAGACA---TGATGGTTATTCTTTGTTTTGACATAAGCACTGAGATGTTT
AY500390.1  CAGACGAGTCGATGGTTATTCTTTGTTTTGACATGAGTACTGAGATGTTT
AY500392.2  CAGACATGTCGACGGTTATCCTTTGTTTTGACATGAGTACTGAGATGTTT
AY766155.1  CAGATATATCGATGGTAATTCTTTGTTTTGACATGAGCACTGAGGTGTTT
AY500391.1  CAGACATGTCGATGGTTATTCTTTGTTTTGACATGAGTACTGAGATGTTT
AY766154.1  CAGATACGTCGATGGTTATTCTTTGTTTTGACATGAGTACTGAGATGTTT

AY766153.1  CGTAATATGAAAATGCCCGATACTTGTTGTCTTATTACGCACGAGCTGTA
AY500390.1  CGTAACATGGAAATGCCTGATTCTTGTAGTCCTATTACGCACGAACTGTA
AY500392.2  CGTAATATGAAAATGCCTGATACTTGTAGT---GTTACACACAAGCAGTA
AY766155.1  CGTAATATGAAAATGCCTGATACTTGTACTCGTATTACGCACGAGCTGTA
AY500391.1  CATGATATGAAAATGCCTGATACTTGTAGTAGGATTACGCACGAGCTGTA
AY766154.1  CATGATATGAAAATGCCTGATACTTGTAGTAGGATTACACACGAGCTGTA

AY766153.1  TTATGGCCTTGTAATCTTATGTGAGTCTTTCACATTGATTGGTTACTCCA
AY500390.1  TTATGGCCTTGTAATCTTATGTGAGTCTTTCACATTGATTGGTTATTCCA
AY500392.2  TTATGGCCTCGTAATCTTATGTGAGTCTTTCACATTGATTGGATACCCCA
AY766155.1  TTATGGTCTTGTAATCTTATGCGACTCTTTCACATTGATTGGTTACTCAA
AY500391.1  TTATGGCCTTGTAATCTTATGTGAGTCTTTCACATTGATTGGTTACTCCA
AY766154.1  TTATGGCCTTGTAATCTTATGTGAGTCTTTCACATTGATTGGTTACTCCA

AY766153.1  ACCCGATAAGTTCTATTGATCCAGCACGTGATAAAATGCACATTTGGGTG
AY500390.1  ACCCAATAAGCTCTATTGATCCAGTAAAAGATAAAATGCACATTTGGGTG
AY500392.2  ACCCAGTGAGTCCTATTGATCCAGCACACGATAAAATGCACATTTGGGTG
AY766155.1  ACCCGATAGGTTCTATTGATTCAGCACGCGATAAAATGCACATTTGGGTG
AY500391.1  ACCCAATCAGTTCTACTGATCCAGCACACGATAAAATGCACATTTGGGTG
AY766154.1  ACCCAATAAGTTCTATTGATCCAGTAGAAGATAAAATGCACATTTGGGTG

AY766153.1  ATGATGGAGTACGGTGTAAGCGAGTCTTGGATTATGAAATACACGATCAG
AY500390.1  ATGATGGAGTACGGTGTAAGCGAGTCTTGGATTATGAAATACACGATTAA
AY500392.2  ATGATGGAGTACGGTGTAAGTGAGTCTTGGATTATGAAATACACGATTAG
AY766155.1  ATGATGGAGTACGGTGTAAGCGAGTCTTGGATTATGAAATACACGATTAA
AY500391.1  ATGATGGAGTACGGTGTCAGCGAGTCTTGGATTATGAAATACACTATTAG
AY766154.1  ATGATGGAGTACGGTGTAAGCGAGTCTTGGATTATGAAATACACTATTAG

AY766153.1  ACCTATTTCTATTAAATCCCCTCTAGCTATTTGGAAGAATAATATATTGC
AY500390.1  ACCTCTTTCTATTGAATCTCCATTAGCGGTTTGGAAGAAAAATATATTGC
AY500392.2  ACCTCTTTCTATTGAATCCCCTTTAGCTGTTTGGAAGAAAAACATATTGC
AY766155.1  ACCTCTTTCAATTGAATCCCCTTTAGCTGTTTGGAAGAATAATATATTGC
AY500391.1  ACCTCTGTCTATTGAATCCCCTTTAGCTGTTTGGAAGAATCATATATTGC
AY766154.1  ACCTCTTTCTATTGAATCCCCTTTAGCTGTTTGGAAGAATCATATATTGC

AY766153.1  TTCTTCAAAACAGAAGCGGAATTCTAATTTCCTATGATCTTAATTCCGGT
AY500390.1  TTCTTCAAAGTAGAAGCGGACGTCTAATTTCCTATGATCTTAATTCCGGT
AY500392.2  TTCTTCAAAGCAGAAGCGGACTTCTAATTTCCTATGATCTTAATTCCGGT
AY766155.1  TTCTTCAAAGTAGAAGCGGACTTCTAATTTCCTATGATCTTAATTCTGGT
AY500391.1  TTCTTCAATGTAGAAGTGGACTTCTAATTTCCTATGATCTTAATTCCGGT
AY766154.1  TTCTTCAAAGTAGAAGTGGGCTTCTAATTTCCTATGATCTTAATTCCGGT

AY766153.1  GAAGCAAAGGAATTCAACTTACATGGTTTTCCTGGCAGTTTGAGTGTTAT
AY500390.1  GAAGCAAAGGAATTGAACTTACATGGTTTTCCAGACAGTTTGAGTGTTAT
AY500392.2  CAAGCAAAGGAACTCAATTTACATGGTTTTCCAGACAGTTTGAGTGTTAT
AY766155.1  GAAGCAAAGGAACTCAACTTACATGGTTTTCCAGACAGTCTGAGTGTTAT
AY500391.1  GAAGCAAAGGAATTGAACTTACATGGTTTTCCAGACAGTTTGAGTGTTAA
AY766154.1  GAAGCAAAGGATTTGAACTTACATGGTTTTCCAGACAGTTTAAGTGTTAA

AY766153.1  AGTTTACAAGGAATGCTTAACTTCAATTCCAAAAGGGAGCGAGTTCAGTA
AY500390.1  AGTTTACAAAGAATGCTTAACTTCAATTCCAAAAGGGAGTGAGTACAGTA
AY500392.2  AGTTTACAAGGAATGCTTAACTTCAATTCAAAATGGGAGCGAGTACAGTA
AY766155.1  AGTTTACAAGGAATGCTTAACTTCAATTCCAAAAGGGAGCGAGTTCAGTA
AY500391.1  AGTTTACAAGGAATGCTTAACTTCAATTCCAAAAGGGAGCGAGTACAGTA
AY766154.1  AGTTTACAAGGAATGCTTAACTTCAATTCCAAAAGGGAGCGAGTACAGTA

AY766153.1  CAAAGGTACAAAAATTTTAG
AY500390.1  CGAAAGTACAGAAATTTTAG
AY500392.2  CAAAAGTACAAAACTTTTAG
AY766155.1  CAGAAGTACAAATTTTTTAG
AY500391.1  CAAAAGTACAAAAATTTTAG
AY766154.1  CAAAAGTACAAAAATTTTAG

;
end;
begin mrbayes;
set autoclose=yes nowarn=yes;
charset first_pos = 1-1170\3;
charset second_pos = 2-1170\3;
charset third_pos = 3-1170\3;
partition by_codon = 3: first_pos,second_pos,third_pos;
set partition = by_codon;
lset nst=6 rates=invgamma;
unlink shape=(3);
mcmc ngen=1000000;
sump burnin=2500;
sumt conformat=simple burnin=2500;
end;
```

# Using MrBayes image in Windows

Please note that data must be under the same drive than the Docker Toolbox installation (usually `C:`) and in a folder with write permissions (e.g. `C:/Users/User_name/`).

You should adapt and run the following command: `docker run --rm -v "/c/Users/User_name/dir/":/data pegi3s/mrbayes mb /data/input`
